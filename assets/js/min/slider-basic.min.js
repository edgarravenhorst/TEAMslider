function checkTransitionEnd(){var a,b=document.createElement("fakeelement"),c={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(a in c)if(void 0!==b.style[a])return c[a]}var AllSlider=function(a,b,c,d){this.width=b,this.height=c,this.initialWidth=b,this.initialHeight=c,this.animType="fade",this.animVars={speed:4e3,animSpeed:1500},this.elementID=a,this.element=$(a),this.slideContainer=this.element.find(".sliderContainer"),this.slides=[],this.currentSlide=0,this.slideCount=0,this.imagesToLoad=0,this.ImagesLoaded=0,this.appendFirstLast=!1,this.slidesInitialized=!1,this.init=function(){this.element.hide(),d.animType&&(this.animType=d.animType),d.animVars&&(this.animVars=d.animVars),this.element.addClass("allslider"),this.element.addClass(this.animType),this.element.css("width",b),this.element.css("height",c),this.initInterface(),this.element.find(".sliderElem").hide(),this.initAnimation=this["init_"+this.animType+"_animation"],this.playAnimation=this["animation_"+this.animType],this.initAnimation(),this.initSlides(),this.playAnimation(),this.timer=setInterval(this.nextSlide.bind(this),this.animVars.speed),this.initSwiping(),window.onresize=this.onResizeHandler.bind(this)},this.pause=function(){clearInterval(this.timer)},this.changeAnimation=function(){this.pause(),this.playAnimation=this["animation_"+this.animType],this.timer=setInterval(this.nextSlide(),this.animVars.speed)},this.initInterface=function(){nextBtn=this.element.find(".btn-next"),prevBtn=this.element.find(".btn-prev"),nextBtn.click(this.nextSlide.bind(this)),prevBtn.click(this.prevSlide.bind(this))},this.nextSlide=function(a){this.pause(),this.currentSlide++,this.currentSlide>=this.slideCount&&(this.currentSlide=0),this.timer=setInterval(this.nextSlide.bind(this),this.animVars.speed),this.playAnimation(),a&&a.preventDefault()},this.prevSlide=function(a){this.pause(),this.currentSlide--,this.currentSlide<0&&(this.currentSlide=this.slideCount-1),this.timer=setInterval(this.nextSlide.bind(this),this.animVars.speed),this.playAnimation(),a&&a.preventDefault()},this.initSlides=function(a){(this.slidesInitialized===!1||a===!0)&&(this.slides=[],this.sliderElements=this.element.find(".sliderElem"),this.slideCount=this.element.find(".sliderElem").length,$.each(this.sliderElements,function(a,b){$(b).attr("id","image-"+a),$(b).css("width",this.width),$(b).css("height",this.height),$(b).find("img").hasClass("slideimage")&&(this.imagesToLoad++,this.positionImage($(b).find("img.slideimage"))),this.slides.push(b)}.bind(this)),console.log(this.imagesToLoad),this.imagesToLoad<=0&&this.letTheShowBegin(),this.slidesInitialized=!0)},this.positionImage=function(a){a.on("load",function(b){slider=this,img=$(b.currentTarget),imgH=img[0].height,imgW=img[0].width,imgH=img[0].height,imgRatio=imgH/imgW,imgW=img[0].width=slider.width,imgH=img[0].height=slider.width*imgRatio,imgH<slider.height&&(imgRatio=imgW/imgH,imgH=img[0].height=slider.height,imgW=img[0].width=slider.height*imgRatio),offsetX=imgW/2,offsetY=imgH/2,a.css("margin-top","-"+offsetY+"px"),a.css("margin-left","-"+offsetX+"px"),this.ImagesLoaded++,slider.ImagesLoaded>=slider.imagesToLoad&&slider.letTheShowBegin()}.bind(this)).each(function(){this.complete&&$(this).load()})},this.onResizeHandler=function(){this.width=$(this.elementID).innerWidth(),this.height=$(this.elementID).innerHeight(),containerWidth=this.width*this.element.find(".sliderElem").length,this.slideContainer.css("width",containerWidth),$.each(this.sliderElements,function(a,b){$(b).css("width",this.width),$(b).css("height",this.height);var c=$(b).find("img");c.hasClass("slideimage")&&(imgW=c.width(),imgH=c.height(),imgRatio=imgH/imgW,imgW=this.width,imgH=this.width*imgRatio,console.log(imgH,this.width,imgRatio),imgH<this.height&&(console.log("height to small"),imgRatio=imgW/imgH,imgH=this.height,imgW=this.height*imgRatio),c.attr("width",imgW),c.attr("height",imgH),offsetX=imgW/2,offsetY=imgH/2,c.css("margin-top","-"+offsetY+"px"),c.css("margin-left","-"+offsetX+"px"),this.slideContainer.css("-webkit-transition","initial"),this.slideContainer.css("-moz-transition","initial"),this.slideContainer.css("-o-transition","initial"),this.slideContainer.css("transition","initial"),slideposition=this.currentSlide*this.width,this.slideContainer.css("-webkit-transform","translateX(-"+slideposition+"px)"),this.slideContainer.css("transform","translateX(-"+slideposition+"px)"),this.slideContainer.css("-ms-transform","translateX(-"+slideposition+"px)"))}.bind(this))},this.letTheShowBegin=function(){this.element.fadeIn(),this.element.css("display","inline-block")},this.initSwiping=function(){swipeSlider=this.swipeHandler.bind(this),this.element.find(".sliderContainer").swipe({swipeStatus:swipeSlider})},this.init(d)};AllSlider.prototype.swipeHandler=function(a,b,c,d){this.swipeHandler_animtype=this["swipeHandler_"+this.animType],this.swipeHandler_animtype?this.swipeHandler_animtype(a,b,c,d):("end"==b||"cancel"==b)&&(this.pause(),"left"==c&&this.nextSlide(),"right"==c&&this.prevSlide())};var transitionEvent=checkTransitionEnd();AllSlider.prototype.init_fade_animation=function(){this.element.find(".description").css("-webkit-transform","translateY("+this.element.find(".description").outerHeight()+"px)"),this.element.find(".description").css("transform","translateY("+this.element.find(".description").outerHeight()+"px)"),this.element.find(".description").css("-ms-transform","translateY("+this.element.find(".description").outerHeight()+"px)"),this.element.find(".description").css("-webkit-transition","all 0.4s ease-in-out 0.5s"),this.element.find(".description").css("-moz-transition","all 0.4s ease-in-out 0.5s"),this.element.find(".description").css("-o-transition","all 0.4s ease-in-out 0.5s"),this.element.find(".description").css("transition","all 0.4s ease-in-out 0.5s"),this.element.find(".sliderElem").css("-webkit-transition","opacity 0.7s ease-in-out"),this.element.find(".sliderElem").css("-moz-transition","opacity 0.7s ease-in-out"),this.element.find(".sliderElem").css("-o-transition","opacity 0.7s ease-in-out"),this.element.find(".sliderElem").css("transition","opacity 0.7s ease-in-out")},AllSlider.prototype.animation_fade=function(){this.element.find(".sliderElem").show(),this.element.find(".description").css("-webkit-transform","translateY("+this.element.find("#image-"+this.currentSlide+" .description").outerHeight()+"px)"),this.element.find(".description").css("transform","translateY("+this.element.find("#image-"+this.currentSlide+" .description").outerHeight()+"px)"),this.element.find(".description").css("-ms-transform","translateY("+this.element.find("#image-"+this.currentSlide+" .description").outerHeight()+"px)"),this.element.find("#image-"+this.currentSlide+" .description").css("-webkit-transform","translateY(0px)"),this.element.find("#image-"+this.currentSlide+" .description").css("transform","translateY(0px)"),this.element.find("#image-"+this.currentSlide+" .description").css("-ms-transform","translateY(0px)"),this.element.find(".sliderElem").css("z-index","1"),this.element.find(".sliderElem").css("opacity","0"),this.element.find("#image-"+this.currentSlide).css("z-index","999"),this.element.find("#image-"+this.currentSlide).css("opacity","1")};