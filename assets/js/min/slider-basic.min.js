!function(a){"function"==typeof define&&define.amd&&define.amd.jQuery?define(["jquery"],a):a(jQuery)}(function(a){"use strict";function b(b){return!b||void 0!==b.allowPageScroll||void 0===b.swipe&&void 0===b.swipeStatus||(b.allowPageScroll=k),void 0!==b.click&&void 0===b.tap&&(b.tap=b.click),b||(b={}),b=a.extend({},a.fn.swipe.defaults,b),this.each(function(){var d=a(this),e=d.data(C);e||(e=new c(this,b),d.data(C,e))})}function c(b,c){function d(b){if(!(jb()||a(b.target).closest(c.excludedElements,Sb).length>0)){var d,e=b.originalEvent?b.originalEvent:b,f=e.touches,g=f?f[0]:e;return Tb=v,f?Ub=f.length:b.preventDefault(),Jb=0,Kb=null,Qb=null,Lb=0,Mb=0,Nb=0,Ob=1,Pb=0,Vb=ob(),Rb=rb(),hb(),!f||Ub===c.fingers||c.fingers===t||R()?(lb(0,g),Wb=Ab(),2==Ub&&(lb(1,f[1]),Mb=Nb=ub(Vb[0].start,Vb[1].start)),(c.swipeStatus||c.pinchStatus)&&(d=J(e,Tb))):d=!1,d===!1?(Tb=y,J(e,Tb),d):(c.hold&&(ac=setTimeout(a.proxy(function(){Sb.trigger("hold",[e.target]),c.hold&&(d=c.hold.call(Sb,e,e.target))},this),c.longTapThreshold)),kb(!0),null)}}function D(a){var b=a.originalEvent?a.originalEvent:a;if(Tb!==x&&Tb!==y&&!ib()){var d,e=b.touches,f=e?e[0]:b,g=mb(f);if(Xb=Ab(),e&&(Ub=e.length),c.hold&&clearTimeout(ac),Tb=w,2==Ub&&(0==Mb?(lb(1,e[1]),Mb=Nb=ub(Vb[0].start,Vb[1].start)):(mb(e[1]),Nb=ub(Vb[0].end,Vb[1].end),Qb=wb(Vb[0].end,Vb[1].end)),Ob=vb(Mb,Nb),Pb=Math.abs(Mb-Nb)),Ub===c.fingers||c.fingers===t||!e||R()){if(Kb=zb(g.start,g.end),P(a,Kb),Jb=xb(g.start,g.end),Lb=tb(),pb(Kb,Jb),(c.swipeStatus||c.pinchStatus)&&(d=J(b,Tb)),!c.triggerOnTouchEnd||c.triggerOnTouchLeave){var h=!0;if(c.triggerOnTouchLeave){var i=Bb(this);h=Cb(g.end,i)}!c.triggerOnTouchEnd&&h?Tb=I(w):c.triggerOnTouchLeave&&!h&&(Tb=I(x)),(Tb==y||Tb==x)&&J(b,Tb)}}else Tb=y,J(b,Tb);d===!1&&(Tb=y,J(b,Tb))}}function E(a){var b=a.originalEvent?a.originalEvent:a,d=b.touches;return d&&d.length?(gb(),!0):(ib()&&(Ub=Zb),Xb=Ab(),Lb=tb(),M()||!L()?(Tb=y,J(b,Tb)):c.triggerOnTouchEnd||0==c.triggerOnTouchEnd&&Tb===w?(a.preventDefault(),Tb=x,J(b,Tb)):!c.triggerOnTouchEnd&&Y()?(Tb=x,K(b,Tb,o)):Tb===w&&(Tb=y,J(b,Tb)),kb(!1),null)}function F(){Ub=0,Xb=0,Wb=0,Mb=0,Nb=0,Ob=1,hb(),kb(!1)}function G(a){var b=a.originalEvent?a.originalEvent:a;c.triggerOnTouchLeave&&(Tb=I(x),J(b,Tb))}function H(){Sb.unbind(Eb,d),Sb.unbind(Ib,F),Sb.unbind(Fb,D),Sb.unbind(Gb,E),Hb&&Sb.unbind(Hb,G),kb(!1)}function I(a){var b=a,d=O(),e=L(),f=M();return!d||f?b=y:!e||a!=w||c.triggerOnTouchEnd&&!c.triggerOnTouchLeave?!e&&a==x&&c.triggerOnTouchLeave&&(b=y):b=x,b}function J(a,b){var c,d=a.touches;return V()||U()||S()||R()?((V()||U())&&(c=K(a,b,m)),(S()||R())&&c!==!1&&(c=K(a,b,n))):eb()&&c!==!1?c=K(a,b,p):fb()&&c!==!1?c=K(a,b,q):db()&&c!==!1&&(c=K(a,b,o)),b===y&&F(a),b===x&&(d?d.length||F(a):F(a)),c}function K(b,d,k){var l;if(k==m){if(Sb.trigger("swipeStatus",[d,Kb||null,Jb||0,Lb||0,Ub,Vb]),c.swipeStatus&&(l=c.swipeStatus.call(Sb,b,d,Kb||null,Jb||0,Lb||0,Ub,Vb),l===!1))return!1;if(d==x&&T()){if(Sb.trigger("swipe",[Kb,Jb,Lb,Ub,Vb]),c.swipe&&(l=c.swipe.call(Sb,b,Kb,Jb,Lb,Ub,Vb),l===!1))return!1;switch(Kb){case e:Sb.trigger("swipeLeft",[Kb,Jb,Lb,Ub,Vb]),c.swipeLeft&&(l=c.swipeLeft.call(Sb,b,Kb,Jb,Lb,Ub,Vb));break;case f:Sb.trigger("swipeRight",[Kb,Jb,Lb,Ub,Vb]),c.swipeRight&&(l=c.swipeRight.call(Sb,b,Kb,Jb,Lb,Ub,Vb));break;case g:Sb.trigger("swipeUp",[Kb,Jb,Lb,Ub,Vb]),c.swipeUp&&(l=c.swipeUp.call(Sb,b,Kb,Jb,Lb,Ub,Vb));break;case h:Sb.trigger("swipeDown",[Kb,Jb,Lb,Ub,Vb]),c.swipeDown&&(l=c.swipeDown.call(Sb,b,Kb,Jb,Lb,Ub,Vb))}}}if(k==n){if(Sb.trigger("pinchStatus",[d,Qb||null,Pb||0,Lb||0,Ub,Ob,Vb]),c.pinchStatus&&(l=c.pinchStatus.call(Sb,b,d,Qb||null,Pb||0,Lb||0,Ub,Ob,Vb),l===!1))return!1;if(d==x&&Q())switch(Qb){case i:Sb.trigger("pinchIn",[Qb||null,Pb||0,Lb||0,Ub,Ob,Vb]),c.pinchIn&&(l=c.pinchIn.call(Sb,b,Qb||null,Pb||0,Lb||0,Ub,Ob,Vb));break;case j:Sb.trigger("pinchOut",[Qb||null,Pb||0,Lb||0,Ub,Ob,Vb]),c.pinchOut&&(l=c.pinchOut.call(Sb,b,Qb||null,Pb||0,Lb||0,Ub,Ob,Vb))}}return k==o?(d===y||d===x)&&(clearTimeout(_b),clearTimeout(ac),Z()&&!ab()?($b=Ab(),_b=setTimeout(a.proxy(function(){$b=null,Sb.trigger("tap",[b.target]),c.tap&&(l=c.tap.call(Sb,b,b.target))},this),c.doubleTapThreshold)):($b=null,Sb.trigger("tap",[b.target]),c.tap&&(l=c.tap.call(Sb,b,b.target)))):k==p?(d===y||d===x)&&(clearTimeout(_b),$b=null,Sb.trigger("doubletap",[b.target]),c.doubleTap&&(l=c.doubleTap.call(Sb,b,b.target))):k==q&&(d===y||d===x)&&(clearTimeout(_b),$b=null,Sb.trigger("longtap",[b.target]),c.longTap&&(l=c.longTap.call(Sb,b,b.target))),l}function L(){var a=!0;return null!==c.threshold&&(a=Jb>=c.threshold),a}function M(){var a=!1;return null!==c.cancelThreshold&&null!==Kb&&(a=qb(Kb)-Jb>=c.cancelThreshold),a}function N(){return null!==c.pinchThreshold?Pb>=c.pinchThreshold:!0}function O(){var a;return a=c.maxTimeThreshold&&Lb>=c.maxTimeThreshold?!1:!0}function P(a,b){if(c.preventDefaultEvents!==!1)if(c.allowPageScroll===k)a.preventDefault();else{var d=c.allowPageScroll===l;switch(b){case e:(c.swipeLeft&&d||!d&&c.allowPageScroll!=r)&&a.preventDefault();break;case f:(c.swipeRight&&d||!d&&c.allowPageScroll!=r)&&a.preventDefault();break;case g:(c.swipeUp&&d||!d&&c.allowPageScroll!=s)&&a.preventDefault();break;case h:(c.swipeDown&&d||!d&&c.allowPageScroll!=s)&&a.preventDefault()}}}function Q(){var a=W(),b=X(),c=N();return a&&b&&c}function R(){return!!(c.pinchStatus||c.pinchIn||c.pinchOut)}function S(){return!(!Q()||!R())}function T(){var a=O(),b=L(),c=W(),d=X(),e=M(),f=!e&&d&&c&&b&&a;return f}function U(){return!!(c.swipe||c.swipeStatus||c.swipeLeft||c.swipeRight||c.swipeUp||c.swipeDown)}function V(){return!(!T()||!U())}function W(){return Ub===c.fingers||c.fingers===t||!z}function X(){return 0!==Vb[0].end.x}function Y(){return!!c.tap}function Z(){return!!c.doubleTap}function $(){return!!c.longTap}function _(){if(null==$b)return!1;var a=Ab();return Z()&&a-$b<=c.doubleTapThreshold}function ab(){return _()}function bb(){return(1===Ub||!z)&&(isNaN(Jb)||Jb<c.threshold)}function cb(){return Lb>c.longTapThreshold&&u>Jb}function db(){return!(!bb()||!Y())}function eb(){return!(!_()||!Z())}function fb(){return!(!cb()||!$())}function gb(){Yb=Ab(),Zb=event.touches.length+1}function hb(){Yb=0,Zb=0}function ib(){var a=!1;if(Yb){var b=Ab()-Yb;b<=c.fingerReleaseThreshold&&(a=!0)}return a}function jb(){return!(Sb.data(C+"_intouch")!==!0)}function kb(a){a===!0?(Sb.bind(Fb,D),Sb.bind(Gb,E),Hb&&Sb.bind(Hb,G)):(Sb.unbind(Fb,D,!1),Sb.unbind(Gb,E,!1),Hb&&Sb.unbind(Hb,G,!1)),Sb.data(C+"_intouch",a===!0)}function lb(a,b){var c=void 0!==b.identifier?b.identifier:0;return Vb[a].identifier=c,Vb[a].start.x=Vb[a].end.x=b.pageX||b.clientX,Vb[a].start.y=Vb[a].end.y=b.pageY||b.clientY,Vb[a]}function mb(a){var b=void 0!==a.identifier?a.identifier:0,c=nb(b);return c.end.x=a.pageX||a.clientX,c.end.y=a.pageY||a.clientY,c}function nb(a){for(var b=0;b<Vb.length;b++)if(Vb[b].identifier==a)return Vb[b]}function ob(){for(var a=[],b=0;5>=b;b++)a.push({start:{x:0,y:0},end:{x:0,y:0},identifier:0});return a}function pb(a,b){b=Math.max(b,qb(a)),Rb[a].distance=b}function qb(a){return Rb[a]?Rb[a].distance:void 0}function rb(){var a={};return a[e]=sb(e),a[f]=sb(f),a[g]=sb(g),a[h]=sb(h),a}function sb(a){return{direction:a,distance:0}}function tb(){return Xb-Wb}function ub(a,b){var c=Math.abs(a.x-b.x),d=Math.abs(a.y-b.y);return Math.round(Math.sqrt(c*c+d*d))}function vb(a,b){var c=b/a*1;return c.toFixed(2)}function wb(){return 1>Ob?j:i}function xb(a,b){return Math.round(Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2)))}function yb(a,b){var c=a.x-b.x,d=b.y-a.y,e=Math.atan2(d,c),f=Math.round(180*e/Math.PI);return 0>f&&(f=360-Math.abs(f)),f}function zb(a,b){var c=yb(a,b);return 45>=c&&c>=0?e:360>=c&&c>=315?e:c>=135&&225>=c?f:c>45&&135>c?h:g}function Ab(){var a=new Date;return a.getTime()}function Bb(b){b=a(b);var c=b.offset(),d={left:c.left,right:c.left+b.outerWidth(),top:c.top,bottom:c.top+b.outerHeight()};return d}function Cb(a,b){return a.x>b.left&&a.x<b.right&&a.y>b.top&&a.y<b.bottom}var Db=z||B||!c.fallbackToMouseEvents,Eb=Db?B?A?"MSPointerDown":"pointerdown":"touchstart":"mousedown",Fb=Db?B?A?"MSPointerMove":"pointermove":"touchmove":"mousemove",Gb=Db?B?A?"MSPointerUp":"pointerup":"touchend":"mouseup",Hb=Db?null:"mouseleave",Ib=B?A?"MSPointerCancel":"pointercancel":"touchcancel",Jb=0,Kb=null,Lb=0,Mb=0,Nb=0,Ob=1,Pb=0,Qb=0,Rb=null,Sb=a(b),Tb="start",Ub=0,Vb=null,Wb=0,Xb=0,Yb=0,Zb=0,$b=0,_b=null,ac=null;try{Sb.bind(Eb,d),Sb.bind(Ib,F)}catch(bc){a.error("events not supported "+Eb+","+Ib+" on jQuery.swipe")}this.enable=function(){return Sb.bind(Eb,d),Sb.bind(Ib,F),Sb},this.disable=function(){return H(),Sb},this.destroy=function(){H(),Sb.data(C,null),Sb=null},this.option=function(b,d){if(void 0!==c[b]){if(void 0===d)return c[b];c[b]=d}else a.error("Option "+b+" does not exist on jQuery.swipe.options");return null}}var d="1.6.9",e="left",f="right",g="up",h="down",i="in",j="out",k="none",l="auto",m="swipe",n="pinch",o="tap",p="doubletap",q="longtap",r="horizontal",s="vertical",t="all",u=10,v="start",w="move",x="end",y="cancel",z="ontouchstart"in window,A=window.navigator.msPointerEnabled&&!window.navigator.pointerEnabled,B=window.navigator.pointerEnabled||window.navigator.msPointerEnabled,C="TouchSwipe",D={fingers:1,threshold:75,cancelThreshold:null,pinchThreshold:20,maxTimeThreshold:null,fingerReleaseThreshold:250,longTapThreshold:500,doubleTapThreshold:200,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,pinchIn:null,pinchOut:null,pinchStatus:null,click:null,tap:null,doubleTap:null,longTap:null,hold:null,triggerOnTouchEnd:!0,triggerOnTouchLeave:!1,allowPageScroll:"auto",fallbackToMouseEvents:!0,excludedElements:"label, button, input, select, textarea, a, .noSwipe",preventDefaultEvents:!0};a.fn.swipe=function(c){var d=a(this),e=d.data(C);if(e&&"string"==typeof c){if(e[c])return e[c].apply(this,Array.prototype.slice.call(arguments,1));a.error("Method "+c+" does not exist on jQuery.swipe")}else if(!(e||"object"!=typeof c&&c))return b.apply(this,arguments);return d},a.fn.swipe.version=d,a.fn.swipe.defaults=D,a.fn.swipe.phases={PHASE_START:v,PHASE_MOVE:w,PHASE_END:x,PHASE_CANCEL:y},a.fn.swipe.directions={LEFT:e,RIGHT:f,UP:g,DOWN:h,IN:i,OUT:j},a.fn.swipe.pageScroll={NONE:k,HORIZONTAL:r,VERTICAL:s,AUTO:l},a.fn.swipe.fingers={ONE:1,TWO:2,THREE:3,ALL:t}});var RehabSlide=function(a,b,c,d){this.id=a,this.slider=b,this.width=b.width,this.height=b.height,this.image=$(c).find("img.slideimage"),this.imagesizing="cover",this.onLoadedFunc=d,this.slideObj=$(c),this.slideObj.attr("id","image-"+this.id),this.slideObj.attr("data-id",this.id),this.slideObj.css("width",this.width),this.slideObj.css("height",this.height),this.centerImage=function(){var a=this.imageH/this.imageW,b=this.slider.width,c=this.slider.width*a;c<this.slider.height&&(a=this.imageW/this.imageH,c=this.slider.height,b=this.slider.height*a),this.image.attr("width",b),this.image.attr("height",c),offsetX=b/2,offsetY=c/2,this.image.css("margin-top","-"+offsetY+"px"),this.image.css("margin-left","-"+offsetX+"px")},this.resize=function(a,b){this.slideObj.css("width",a),this.slideObj.css("height",b),"cover"==this.imagesizing&&0!==this.image.length&&this.centerImage()},this.loadImage=function(){0!==this.image.length?this.image.one("load",function(a){console.log("Image Loaded"),this.imageH=$(a.currentTarget)[0].height,this.imageW=$(a.currentTarget)[0].width,console.log(this.imageW,this.imageH),this.centerImage(),this.onLoadedFunc()}.bind(this)).each(function(){this.complete&&$(this).load()}):this.onLoadedFunc()},this.loadImage()},activeSliders=Array(),RehabAnimations=Array(),RehabSlider=function(a,b,c,d){this.sliderID=a,this.sliderObj=$(a),this.width=b,this.height=c,this.currentSlide=0,this.previousSlide=-1,this.animationType=d.animation.type||"slide",this.animationspeed=d.animation.speed||1500,this.slideDelay=d.animation.delay||4e3,this.animationVars=d.animation,this.animation=RehabAnimations[this.animationType]?new RehabAnimations[this.animationType](this,this.animationVars):!1,this.selector=!1,this.selectorItemsInView=3,this.timer,this.timelineTimer,this.timeline=!0,this.dynamicWidth=b&&"auto"!=b&&-1!=b?!1:!0,this.dynamicHeight=c&&"auto"!=c&&-1!=c?!1:!0,this.imagesToLoad=0,this.ImagesLoaded=0,this.slides=[],this.slideCount=0,this.slidesInitialized=!1,this.init=function(){this.sliderObj.addClass("rehabslider"),this.sliderObj.addClass("animation_"+this.animationType),this.bullets=this.sliderObj.find(".bullets"),this.slideContainer=this.sliderObj.find(".sliderContainer"),this.setSliderSize(this.width,this.height),this.slidesInitialized||this.initSlides(),this.initInterface(),this.bullets&&this.bulletsCreate(),this.animation.init(),this.initSwiping(),this.timeline&&this.initTimeline(),this.selector&&(this.selector=new ThumbnailSelector(this,this.selectorItemsInView)),$(window).resize(this.onResizeHandler.bind(this)),activeSliders.push(this)},this.initSlides=function(a){(this.slidesInitialized===!1||a===!0)&&(this.ImagesLoaded=0,this.slides=[],this.sliderElements=this.sliderObj.find(".rehabslide"),this.slideCount=this.sliderObj.find(".rehabslide").length,$.each(this.sliderElements,function(a,b){var c=new RehabSlide(a,this,b,this.imageLoaded.bind(this));this.slides.push(c)}.bind(this)),this.slidesInitialized=!0)},this.imageLoaded=function(){this.ImagesLoaded++,this.ImagesLoaded>=this.slideCount&&this.letTheShowBegin()},this.letTheShowBegin=function(){this.hasSelector&&(this.selector=new ThumbnailSelector(this,this.selectorThumbsVisible)),this.sliderObj.fadeIn(),this.onResizeHandler()},this.onResizeHandler=function(){this.pause(),this.setSliderSize(this.width,this.height),$.each(this.slides,function(a,b){b.resize(this.width,this.height)}.bind(this)),this.selector&&this.selector.onResizeHandler(),this.play()},this.setSliderSize=function(){this.dynamicWidth&&(this.width=this.sliderObj.parent().innerWidth()),this.sliderObj.css("width",this.width),this.dynamicHeight&&(this.height=this.sliderObj.parent().innerHeight()),this.sliderObj.css("height",this.height)},this.bulletsCreate=function(){for(var a=0;a<this.slideCount-2;a++)$(".bullets",this.sliderID).append('<button data-slide="'+(a+1)+'"></button>')},this.initInterface=function(){nextBtn=this.sliderObj.find(".btn-next"),prevBtn=this.sliderObj.find(".btn-prev"),nextBtn.click(this.nextSlide.bind(this)),prevBtn.click(this.prevSlide.bind(this)),this.initBullets()},this.initBullets=function(){var a=this;$(".bullets button",this.elementID).each(function(b){a.activeState(a.currentSlide),$(this).on("click",function(){a.toSlide(b+1),a.activeState()})})},this.initTimeline=function(){this.sliderObj.prepend("<section class='timeline'><div class='curtime'></div></section>"),this.timelineStatusBar=this.sliderObj.find(".timeline .curtime")},this.updateTimeline=function(){var a=new Date-this.timelineStartDate,b=a/this.animationVars.delay*100;this.timelineStatusBar.css("width",b+"%")},this.initSwiping=function(){var a=this.swipeHandler.bind(this);this.sliderObj.swipe({allowPageScroll:"vertical",excludedElements:".btn-prev, .btn-next, button",triggerOnTouchLeave:!0,swipeStatus:a})},this.swipeHandler=function(a,b,c,d){return"move"==b&&"up"!=c&&"down"!=c&&d>10&&this.pause(),$(a.target).attr("href")&&7>d&&("end"==b||"cancel"==b)?void $(a.target).unbind("click").click():void(this.animation.onswipe?this.animation.onswipe(a,b,c,d):("end"==b||"cancel"==b)&&("left"==c&&this.nextSlide(),"right"==c&&this.prevSlide()))},this.play=function(){clearInterval(this.timer),this.timer=setInterval(this.nextSlide.bind(this),this.slideDelay),this.timeline&&(this.timelineStartDate=new Date,clearInterval(this.timelineTimer),this.timelineTimer=setInterval(this.updateTimeline.bind(this),10))},this.pause=function(){clearInterval(this.timer),clearInterval(this.timelineTimer)},this.nextSlide=function(a){this.pause(),this.previousSlide=this.currentSlide,this.currentSlide++,this.currentSlide>=this.slideCount&&(this.currentSlide=0),this.play(),this.animation.animate(this.previousSlide,this.currentSlide),a&&a.preventDefault(),this.activeState(),this.hasSelector&&this.selector.highlight(this.currentSlide)},this.prevSlide=function(a){this.pause(),this.previousSlide=this.currentSlide,this.currentSlide--,this.currentSlide<0&&(this.currentSlide=this.slideCount-1),this.play(),this.animation.animate(this.previousSlide,this.currentSlide),a&&a.preventDefault(),this.activeState(),this.hasSelector&&this.selector.highlight(this.currentSlide)},this.activeState=function(){var a;a=this.currentSlide>this.slideCount-2?0:this.currentSlide-1,$("button",this.bullets).removeClass("active"),$("button",this.bullets).eq(a).addClass("active")}.bind(this),this.toSlide=function(a){this.pause(),this.previousSlide=this.currentSlide,this.currentSlide=a,this.currentSlide<0&&(this.currentSlide=this.slideCount-1),this.currentSlide>=this.slideCount&&(this.currentSlide=0),this.play(),this.animation.animate(this.previousSlide,this.currentSlide),this.activeState(),this.hasSelector&&this.selector.select(this.currentSlide)}};RehabAnimations.fade=function(a,b){this.sliderObj=a.sliderObj,this.speedseconds=b.speed/1e4,this.init=function(){this.sliderObj.find(".rehabslide").css("opacity","0"),this.sliderObj.find(".rehabslide:first-child").css("z-index","999"),this.sliderObj.find(".rehabslide:first-child").css("opacity","1"),this.setCSS3(this.sliderObj.find(".rehabslide"),"transition","opacity "+this.speedseconds+"s ease-in-out")},this.animate=function(a,b){this.animateOut(a),this.animateIn(b)},this.animateIn=function(a){this.sliderObj.find("#image-"+a).css("z-index","1"),this.sliderObj.find("#image-"+a).css("opacity","1")},this.animateOut=function(a){this.sliderObj.find("#image-"+a).css("z-index","0"),this.sliderObj.find("#image-"+a).css("opacity","0")},this.onresize=function(){},this.setCSS3=function(a,b,c){a.css("-webkit-"+b,c),a.css("-moz-"+b,c),a.css("-o-"+b,c),a.css(b,c)}};
